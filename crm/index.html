<!DOCTYPE html>
<html lang="en" dir="ltr" style="margin:0;padding:0;">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="ux.css">
    <title>Editor</title>
  </head>
  <body>


  </body>
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>

  <!-- LIBRARIES -->
  <script src="../lib/_helpers.js" charset="utf-8"></script>
  <script src="../lib/thing.js" charset="utf-8"></script>
  <script src="../lib/axiom.js" charset="utf-8"></script>

  <script src="../lib/relation.js" charset="utf-8"></script>
  <script src="../lib/join.js" charset="utf-8"></script>
  <script src="../lib/stores.js" charset="utf-8"></script>

  <!-- PLAYGROUND -->
  <script src="crm.js" charset="utf-8"></script>

  <script type="text/javascript">
    var peers = ['http://localhost:8000/gun'/*,'https://notabug.io/gun'*/]
    var gun = Gun({peers:peers, localStorage: false, radisk:false});

  </script>

    <textarea style="position:fixed;right:0;top:0;z-index:1;height:100vh;width:49vw;content-sizing:border-box;border:5px solid green;box-shadow:10px 10px 10px black;padding:0;margin:0;" 
    onKeyUp="evalSource(event)"
    onKeyDown="evalSource(event)"
  ></textarea>

  <style type="text/css">
    iframe {
      position:fixed;
      left:0;
      top:0;
      z-index:1;
      height:100vh;
      width:49.5vw;
      border:5px solid blue;
      padding:0;margin:0;
    }
</style>

  <script>

    function evalSource(event) {
    
     /* var oldThing = document.getElementById('Thing1');
      if(oldThing !== null) {
        oldThing.parentNode.removeChild(oldThing)
      }*/

      var thisThing = document.createElement('iframe');
          thisThing.id = 'Thing1'
      document.body.appendChild(thisThing);
      frames[0].window.eval(event.target.value);
    }

    evalSource();

  </script>


</html>
